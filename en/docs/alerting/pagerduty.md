# PagerDuty <span class="badge badge-danger badge-outlined" title="Enterprise Edition">EE</span>

## What can I do with the PagerDuty module?

Using the PagerDuty module you can receive host and service notifications from openITCOCKPIT directly into a PagerDuty account.

Unlike our email integration, PagerDuty can display and manage tickets from a variety of different sources in an organised and structured way.

As soon as an error occurs on a host or for a service, a PagerDuty ticket is created.

You can even receive notifications on a smartphone when using the PagerDuty app. If several notifications are sent to a host or service, these are combined into one ticket.

After configuring two-way integration, ticket acknowledgements (confirmations) are also transferred back to openITCOCKPIT.

The ticket author and a link to the ticket are displayed in the host / service acknowledgement message in openITCOCKPIT.

When the host or service regains an Up or Ok status, the PagerDuty ticket is automatically closed (if still open).

![](/images/pagerduty-incidents.png)

### What can I configure?

The settings for the PagerDuty module can be found under "Configuration / PagerDuty".

| Name Field | Required Field | Description |
| --- | --- | --- |
| Api key | :warning: | PagerDuty API Key |
| Integration Key | :warning: | The integration key you received after creating a service on PagerDuty |
| API URL | :warning: | PagerDuty Service API URL |
| Enable Two-Way Integration |     | Two-way integration allows Slack to send acknowledgements for hosts and services to openITCOCKPIT. This option requires that the openITCOCKPIT server can be reached via the Internet |
| Webhook URL |     | This is generated by openITCOCKPIT and specifies the webhook URL for PagerDuty. A custom API key must first be created with openITCOCKPIT for this to work. |
| Use Proxy Server |     | Indicates whether to use the configured proxy |

## Installation

### Simple integration

With the simple integration, openITCOCKPIT can open tickets in PagerDuty, create an acknowledgement and close tickets. However, acknowledgements created in PagerDuty cannot be transferred to openITCOCKPIT.
openITCOCKPIT communicates with PagerDuty via API version 2.

To enable this feature, you must first create an API key. To do this, access the PagerDuty menu and navigate to Configuration → API Access.

Click on the "**Create New Api Key**" button, enter a description, select API version 2 and confirm by pressing "**Create Key**".

![](/images/pagerduty-createapikey.png)

In the next dialog, copy the API key created in openITCOCKPIT to the PagerDuty settings page.

![](/images/pagerduty-getapikey.png)

You should now immediately save your key as it will not be possible to display it again.

A new service must now be created.

Navigate to the Configuration → Services menu item and click on "**\+ New Service**".

Here it is important that "openITCOCKPIT" is selected as the "**Integration Type**" from the selection box ("Select a tool").

![](/images/pagerduty-addservice.png)

The Incident Behaviour option must be set to "*Create incidents*"!

Click on "**Add Service**" and copy the displayed "Integration Key".

### Two-way integration

With our two-way integration, acknowledgements created in PagerDuty will also be transferred to your openITCOCKPIT installation.

In order to use two-way integration, a webhook must be created.

To do this, navigate to the Configuration →Extensions menu item.

Click on "**\+ New Extension**" and select "*Generic V2 Webhook*".

Copy the webhook URL from the openITCOCKPIT PagerDuty settings into the URL field and replace "*
YOUR\_API\_KEY\_HERE*" with the new API key.

If your system is behind a proxy, you may need to manually adjust the hostname to ensure things work correctly.

To create an openITCOCKPIT API key, click on your user profile in the top left corner in openITCOCKPIT and scroll to the bottom of the page. From here you can create a new API key.

![](/images/pagerduty-serviceextensions.png)

Click on "**Save**" to save the extension.

### Updating the openITCOCKPIT configuration

Finally, all parameters that have not yet been copied must now be transferred to the openITCOCKPIT PagerDuty module's configuration.

Don't forget to save your changes.

![](/images/pagerduty-config.png)

So that the host/service contact person can be notified when a problem occurs, the nominated individual will need the PagerDuty notification commands.

Search for "Contacts" in the openITCOCKPIT menu or go directly to "Monitoring→ Objects → Contacts".

On the contact page, click the gear symbol on the right.

![](/images/menu-contacts.png)

![](/images/contacts-editcontact.png)

Edit the contact you want PagerDuty to notify, add the command "*host-notify-by-pagerduty*" to the host commands and "*service-notify-by-pagerduty*" to the service commands.

![](/images/contacts-pagerdutynotifications.png)

**Finished. The configuration is now complete.**
